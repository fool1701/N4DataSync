<!-- Htmldoc has been run -->
<!--
   @author    Brian Frank
   @creation  10 Jul 03
   @version   $Revision$ $Date$
   @since     Niagara 3.0
 -->
 
<html>

<head>
<title>Files</title>
<link rel='stylesheet' href='module://docDeveloper/rc/sunlight.default.css'>
<!-- Auto-generated style sheet link --><link rel='StyleSheet' href='module://bajaui/doc/style.css' type='text/css' />
<!-- Auto-generated js link for Activity Monitoring --><script type='text/javascript' src='module://web/rc/util/activityMonitor.js'></script>
<script type='text/javascript'>window.addEventListener('load', activityMonitor.start);</script>
</head>

<body>
<!-- Auto-generated Header NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/remoteProgramming.html" class="navbar">Prev</a> |  <a href="/doc/localization.html" class="navbar">Next</a></p>

<script type='text/javascript' src='module://docDeveloper/rc/sunlight-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/sunlight.java-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/sunlight.xml-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/niagara-sunlight-support.js'></script>

<!-- Title Block -->
<h1 class='title'>Files</h1> 

<!------------------------------------------------------------->
<h1>Overview</h1>
<!------------------------------------------------------------->

<p>
The Niagara Framework is built upon the fundamental principle
that everything of interest is modeled as a <code>BObject</code>.
Files are one of the most basic entities which are mapped into 
the object model.
</p>

<p>
The Niagara file model is a comprehensive architecture for mapping
all files into a consistent set of APIs:
</p>

<ul>
<li>Files on the local file system (<code>java.io.File</code>);</li>
<li>Files stored within modules and zip files;</li>
<li>Files over the network using Fox;</li>
<li>Files over the network using HTTP;</li>
<li>Files over the network using FTP;</li>
<li>Files in memory;</li>
<li>Files which are autogenerated;</li>
</ul>

<!------------------------------------------------------------->
<h1>API</h1>
<!------------------------------------------------------------->

<p>
The <code><a href='module://docDeveloper/doc/baja-rt/javax/baja/file/package-index.bajadoc'>javax.baja.file</a></code>
package provides the core APIs used for file access.  There are three core
concepts in the file model:
</p>

<ol>

<li>
<code><a href='module://docDeveloper/doc/baja-rt/javax/baja/file/BIFile.bajadoc'>BIFile</a></code>: represents
a file.  In general file extensions are mapped to specific Types of <code>BIFile</code>
using the registry.  Effectively the Niagara Type wraps the MIME type.  For example common 
file types include <code>file:TextFile</code>, <code>file:XmlFile</code>, 
<code>file:ImageFile</code>, <code>file:WordFile</code>. The "file" module 
contains mappings for common file extensions.
</li>

<li>
<code><a href='module://docDeveloper/doc/baja-rt/javax/baja/file/BIFileStore.bajadoc'>BIFileStore</a></code>: 
models a <code>BIFile</code> backing store.  For example a <code>file:TextFile</code>
might exist on the file system, in a zip file, or over a network.  Each of these
file storage mechanism reads and writes the file differently.  There a <code>BIFileStore</code>
for every <code>BIFile</code> which may be accessed via the <code>BIFile.getStore()</code>
method.  Common store types include <code>baja:LocalFileStore</code>, 
<code>baja:MemoryFileStore</code>, and <code>baja:ZipFileEntry</code>.
</li>

<li>
<code><a href='module://docDeveloper/doc/baja-rt/javax/baja/file/BFileSpace.bajadoc'>BFileSpace</a></code>: 
represents a set of files with a common storage model.  <code>BFileSpaces</code>
are responsible for resolving <code>FilePaths</code> into <code>BIFiles</code>.
The prototypical file space is the singleton for local file system 
<code><a href='module://docDeveloper/doc/baja-rt/javax/baja/file/BFileSystem.bajadoc'>BFileSystem</a></code>.
The ord "local:|file:" always maps to <code>BFileSystem.INSTANCE</code>.
</li>

</ol>

<!------------------------------------------------------------->
<h1>Mapping File Extensions</h1>
<!------------------------------------------------------------->

<p>
You can create custom file types for specific file extensions
by following these rules:
</p>

<ul>

<li>
Create an implementation of <code>BIFile</code>.  Utilize one of the
existing base classes such as <code>baja:DataFile</code>.  If you 
wish to utilize agents such as file text editors then you must extend 
<code>file:TextFile</code> or at least implement <code>file:ITextFile</code>.
</li>

<li>
Make sure you override <code>getMimeType()</code> to return the MIME
type for the file's contents:
<pre>
  <code class="sunlight-highlight-java">
public String getMimeType() { return "text/html"; }
  </code>
</pre>
</li>

<li>
Provide a custom icon if you wish by overriding the <code>getIcon()</code>
method:
<pre>
  <code class="sunlight-highlight-java">
public BIcon getIcon() { return icon; }
private static final BIcon icon = BIcon.std("files/html.png");
  </code>
</pre>
</li>

<li>
Map one of more file extensions to your type using in "module-include.xml":
<pre>
  <code class="sunlight-highlight-xml">
  &lt;type name="HtmlFile" class="javax.baja.file.types.text.BHtmlFile"&gt;
    &lt;file&gt;
      &lt;ext name="html"/&gt;
      &lt;ext name="htm"/&gt;
    &lt;/file&gt;
  &lt;/type&gt;
  </code>
</pre>
</li>

</ul>

<script type="text/javascript">
    window.niagara.docDevUtil.highlightCode();
</script>

<!-- Auto-generated Footer NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/remoteProgramming.html" class="navbar">Prev</a> |  <a href="/doc/localization.html" class="navbar">Next</a></p>
<!-- Auto-generated copyright note --><p class='copyright'></p>
</body>
</html>
