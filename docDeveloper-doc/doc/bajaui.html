<!-- Htmldoc has been run -->
<!--
   @author    Brian Frank
   @creation  2 Oct 01
   @version   $Revision$ $Date$
   @since     Niagara 3.0
 -->
 
<html>

<head>
<title>Views</title>
<!-- Auto-generated style sheet link --><link rel='StyleSheet' href='module://bajaui/doc/style.css' type='text/css' />
<!-- Auto-generated js link for Activity Monitoring --><script type='text/javascript' src='module://web/rc/util/activityMonitor.js'></script>
<script type='text/javascript'>window.addEventListener('load', activityMonitor.start);</script>
</head>

<body>
<!-- Auto-generated Header NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/gx.html" class="navbar">Prev</a> |  <a href="/doc/workbench.html" class="navbar">Next</a></p>


<!-- Title Block -->
<h1 class='title'>Bajaui Widget Toolkit</h1> 

<!------------------------------------------------------------->
<h1 id="overview">Overview</h1>
<!------------------------------------------------------------->

<p>
The <a href='module://docDeveloper/doc/bajaui-wb/module-index.bajadoc'>bajaui</a> module contains 
a widget toolkit for building rich user interfaces.  This toolkit is built using the 
Niagara component model.  Widgets are <code>BComponents</code> derived from 
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BWidget.bajadoc'>BWidget</a>.  Widgets 
define basic UI functions:
</p>                           

<ul>
<li><b>Layout</b>: defines the layout model - how widget trees are positioned on the graphics device</li>
<li><b>Painting</b>:  defines how widgets paint themselves using graphical composition and clipping</li>
<li><b>Input</b>: defines how user widgets process user input in the form of mouse, keyboard, and focus events</li>
<li><b>Data Binding</b>:  defines are how widgets are bound to data sources</li>
</ul>

<p>
Widgets are organized in a tree structure using the standard component slot model.  
Typically the root of the tree is a widget modeling a top level window such as  
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BFrame.bajadoc'>BFrame</a> or
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BDialog.bajadoc'>BDialog</a>.
</p>

<!------------------------------------------------------------->
<h1 id="layout">Layout</h1>
<!------------------------------------------------------------->

<p>
All widgets occupy a rectangular geometry called the bounds. Bounds includes a
position and a size. Position is a x,y point relative to the widget parent's
coordinate system. Size is the width and height of the widget. The widget
itself defines its own logical coordinate system with its origin in the top
left corner, which is then used to position its children widgets. Every widget
may define a preferred size using <code>computePreferredSize()</code>. Layout
is the process of assigning bounds to all the widgets in a widget tree. Every
widget is given a chance to set the bounds of all its children in the
doLayout() callback. When a layout refresh is needed, you may call
<code>relayout()</code>. The relayout call is asynchronous - it merely enqueues
the widget (and all its ancestors) for layout at some point in the near future.
</p>

<!------------------------------------------------------------->
<h2 id="panes">Panes</h2>
<!------------------------------------------------------------->

Widget's which are designed to be containers for child widgets derive from the
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/pane/BPane.bajadoc'>BPane</a>
class. A summary of commonly used panes:

<ul> 

<li><a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/pane/BCanvasPane.bajadoc'>BCanvasPane</a>:  
used for absolute positioning (discussed below);</li>

<li><a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/pane/BBorderPane.bajadoc'>BBorderPane</a>:  
is used to wrap one widget and provide margin, border, and
padding similar to the CSS box model.</li>

<li><a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/pane/BEdgePane.bajadoc'>BEdgePane</a>:  
supports five potential children top, bottom, left, right, and
center. The top and bottom widgets fill the pane horizontally and use their
preferred height. The left and right widgets use their preferred width, and
occupy the vertical space between the top and bottom. The center widget gets
all the remainder space.</li>

<li><a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/pane/BGridPane.bajadoc'>BGridPane</a>:  
lays out it children as a series of columns and rows. Extra
space in the rows and columns is configurable a number of ways.</li>

<li><a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/pane/BSplitPane.bajadoc'>BSplitPane</a>:  
supports two children with a movable splitter between them.</li>

<li><a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/pane/BTabbedPane.bajadoc'>BTabbedPane</a>:  
supports any number of children - only one is currently
selected using a set of tabs.</li>

<li><a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/pane/BScrollPane.bajadoc'>BScrollPane</a>:  
supports a single child that may have a preferred size
larger than the available bounds using a set of scroll bars.</li>

</ul>

<!------------------------------------------------------------->
<h2 id="absLayout">Absolute Layout</h2>
<!------------------------------------------------------------->

<p>
Every widget also has a frozen property called layout of type 
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BLayout.bajadoc'>BLayout</a>. The
<code>BLayout</code> class is used to store absolute layout. Widgets which wish to 
use absolute layout should be placed in a <code>BCanvasPane</code>. BLayout is a simple 
with the following string format "x,y,width,height". Each value may be a logical
coordinate within the parent's coordinate space or it may be a percent of the
parent's size. Additionally width and height may use the keyword "pref" to
indicate use of preferred width or height.  Examples include  "10,5,100,20" 
"0,0,30%,100%", and "10%,10%,pref,pref".  
</p>

<p>
Lastly the keyword "fill" may be used as a shortcut for "0,0,100%,100%" which
means fill the parent pane. Fill is the default for the layout property which
makes it easy to define layers and shapes.
</p>

<!------------------------------------------------------------->
<h1 id="painting">Painting</h1>
<!------------------------------------------------------------->

<p>
All widgets are given a chance to paint themselves using the <code>paint(Graphics)</code>
callback. The graphics is always translated so that the origin 0,0 is
positioned at the top, left corner of the widget. The graphic's clip is set to
the widget's size. Widget's with children, should route to paintChild() or
<code>paintChildren()</code>. Painting follows the gx compositing rules. Alpha and
transparent pixels blend with the pixels already drawn. Widgets are drawn in
property order. So the first widget is drawn first (at the bottom), and the
last widget drawn last (on the top). Note that hit testing occurs in reverse
order (last is checked first). Effective z-order is reverse of property order
(consistent with SVG).
</p>

<!------------------------------------------------------------->
<h1 id="input">Input</h1>
<!------------------------------------------------------------->

<p>
User events are grouped into keyboard input, mouse input, and focus events. The
following events are defined for each group:
</p>

<p><b><a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/event/BKeyEvent.bajadoc'>BKeyEvent</a></b></p>

<ul>
<li>keyPressed</li>
<li>keyReleased</li>
<li>keyTyped</li>
</ul>

<p><b><a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/event/BMouseEvent.bajadoc'>BMouseEvent</a></b></p>

<ul>
<li>mouseEntered</li>
<li>mouseExited</li>
<li>mousePressed</li>
<li>mouseReleased</li>
<li>mouseMoved</li>
<li>mouseDragged</li>
<li>mouseDragStarted</li>
<li>mouseHover</li>
<li>mousePulse</li>
<li>mouseWheel</li>
</ul>

<p><b><a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/event/BFocusEvent.bajadoc'>BFocusEvent</a></b></p>

<ul>
<li>focusGained</li>
<li>focusLost</li>
</ul>

<!------------------------------------------------------------->
<h1 id="designPatterns">Design Patterns</h1>
<!------------------------------------------------------------->

<p>
Some complicated widgets have mini-frameworks all to their own.  These include 
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/table/BTable.bajadoc'>BTable</a>,
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/tree/BTree.bajadoc'>BTree</a>,
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/treetable/BTreeTable.bajadoc'>BTreeTable</a>, and
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/text/BTextEditor.bajadoc'>BTextEditor</a>.  All
of these widgets use a consistent design pattern based on a set of support APIs:
</p>                                                                                 

<ul> 
<li><b>Model</b>: defines the underlying logical model of the widget visualization</li>
<li><b>Controller</b>: processes all user input events, handles popup menus, and manages commands</li>
<li><b>Renderer</b>: responsible for painting the widget</li>
<li><b>Selection</b>: manages the current selection of the widget</li>
</ul>                                     

<!------------------------------------------------------------->
<h1 id="commands">Commands</h1>
<!------------------------------------------------------------->

<p>
The bajaui module provides a standard API for managing user commands
using the <a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/Command.bajadoc'>Command</a>
and <a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/ToggleCommand.bajadoc'>ToggleCommand</a>
classes.  Commands are associated with one or more widgets which invoke
the command.  Typically this association happens by using a special constructor
of the widget such as <code>BButton(Command cmd)</code> or using a <code>setCommand()</code>
method.  <code>Commands</code> are commonly used with <a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BButton.bajadoc'>BButton</a>
and <a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BActionMenuItem.bajadoc'>BActionMenuItem</a>.
<code>ToggleCommands</code> are commonly used with <a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BCheckBox.bajadoc'>BCheckBox</a>,
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BRadioButton.bajadoc'>BRadioButton</a>,
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BCheckBoxMenuItem.bajadoc'>BCheckBoxMenuItem</a>, and
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BRadioButtonMenuItem.bajadoc'>BRadioButtonMenuItem</a>.
</p>

<p>
Commands provide several functions.  First they provide a centralized location to enable
and disable the command.  It is common for a command to be available via a menu item,
a toolbar button, and a popup menu.  By enabling and disabling the command all the widgets
are automatically enabled and disabled.
</p>

<p>
Commands also provide a standard mechanism used for localization via the lexicon APIs.
If one of the module or lexicon constructors is used the command automatically loads
its visualization from a lexicon using a naming pattern: keyBase+".label", keyBase+".icon", 
keyBase+".accelerator", and keyBase+".description". The icon value should be an ord to 
a 16x16 png file.  Widgets created with the Command will automatically set their properties
accordingly.
</p>                                         

<p>
The Command API also defines the basic framework for undo and redo.  Whenever a command
is invoked via the <code>invoke()</code> method, the Command can return an instance of
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/CommandArtifact.bajadoc'>CommandArtifact</a>
to add to the undo stack.  Commands which don't support undo can just return <code>null</code>.
</p>


<!------------------------------------------------------------->
<h1 id="binding">Data Binding</h1>
<!------------------------------------------------------------->

<p> 
All widgets may be bound to zero or more data sources using the 
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BBinding.bajadoc'>BBinding</a> class.
Bindings are added to the widget as dynamic child slots.  You may use
the <code>BWidget.getBindings()</code> to access the current bindings on
a given widget.  Bindings always reference a data source via an ord.  The
<code>BBinding</code> API defines the basic hooks given to bindings to
<i>animate</i> their parent widget.
</p>

<p>
The most common type of binding is the 
<a href='module://docDeveloper/doc/bajaui-wb/javax/baja/ui/BValueBinding.bajadoc'>BValueBinding</a> class.
Value binding provides typical functionality associated with building
real-time graphics.  It supports mouse over status and right click actions.
Additionally it provides a mechanism to animate any property of its parent
widget using <code>BConverters</code> to convert the target object into 
property values.  Converters are added as dynamic properties using the name
of the widget property to animate.  For example to animate the "text" property
of a <code>BLabel</code> you might add a <code>ObjectToString</code> converter
to the binding using the property name "text".                                                      
</p>

<!------------------------------------------------------------->
<h1 id="performanceTuning">Performance Tuning</h1>
<!------------------------------------------------------------->

<p>The gx and bajaui toolkits are built using the AWT and Java2D.  A
key characteristic of performance is based on how widgets are double
buffered and drawn to the screen.  The following system properties
may be used to tune widget rendering:</p>

<ul>

<li><b>niagara.ui.volatileBackBuffer</b>:  Defines whether the back buffer
used for widget rendering uses <code>createVolatile()</code> or
<code>createImage()</code>.  Volatile back buffers can take advantage
of Video RAM and hardware acceleration, non-volatile back buffers are
located in system memory. Note: this feature is currently disabled.</li>

<li><b>sun.java2d.noddraw</b>:  Used to disable Win32 DirectDraw.  Often
disabling DirectDraw can correct problems with flickering.</li>

</ul> 


<!-- Auto-generated Footer NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/gx.html" class="navbar">Prev</a> |  <a href="/doc/workbench.html" class="navbar">Next</a></p>
<!-- Auto-generated copyright note --><p class='copyright'></p>
</body>
</html>
