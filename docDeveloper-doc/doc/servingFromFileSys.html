<!-- Htmldoc has been run -->
<!doctype html>
<html>
<head>
<meta charset='utf-8'>
<link rel='stylesheet' href='module://docDeveloper/rc/sunlight.default.css'>
<!-- Auto-generated style sheet link --><link rel='StyleSheet' href='module://bajaui/doc/style.css' type='text/css' />
<!-- Auto-generated js link for Activity Monitoring --><script type='text/javascript' src='module://web/rc/util/activityMonitor.js'></script>
<script type='text/javascript'>window.addEventListener('load', activityMonitor.start);</script>
</head>
<body>
<!-- Auto-generated Header NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/ui/uiChangelog.html" class="navbar">Prev</a> |  <a href="/doc/requirejs.html" class="navbar">Next</a></p>

<script type='text/javascript' src='module://docDeveloper/rc/sunlight-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/sunlight.java-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/sunlight.javascript-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/sunlight.xml-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/sunlight.css-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/niagara-sunlight-support.js'></script>

<h1 id="serving-html-from-the-niagara-station-file-system">Serving HTML from the Niagara Station File System</h1>
<h2 id="should-i-serve-up-my-ui-as-html-from-the-file-system">Should I serve up my UI as HTML from the file system?</h2>
<p>Tridium&rsquo;s opinion is no, you should not. Serving HTML direct from the file system comes with a number of downsides:</p>
<ul>
  <li><code>.htm</code> files can be edited by anyone with write access, without any source control or changelogs.</li>
  <li>They are not versioned, so they cannot easily be upgraded or distributed to multiple stations.</li>
  <li>They are not relativized or reusable, so you cannot use <code>.htm</code> files as views on components.</li>
  <li>The actual HTML5 profile will automatically provide the latest API improvements, RequireJS configuration, etc. <code>.htm</code> files bypass the profile, so they are more vulnerable to breaking when upgrading Niagara versions.</li>
</ul>
<p>Tridium recommends that the web UI be implemented as <code>bajaux</code> Widgets packaged into modules, as described in Doc Developer, or using the Px Editor.</p>
<p>That said, some use cases may call for serving HTML direct from the file system, so here&rsquo;s how.</p>
<h2 id="how-does-a-user-access-html-from-the-file-system">How does a user access HTML from the file system?</h2>
<p>Files can be accessed by the user from the Station&rsquo;s shared file space via the <code>/file/</code> servlet path:</p>
<pre><code class="html">https://yourIpAddress/file/index.html
</code></pre>
<p>&hellip;or via the File ORD scheme&hellip;</p>
<pre><code class="html">https://yourIpAddress/ord/file:^index.html|view:web:FileDownloadView
</code></pre>
<p><strong>Why is &lsquo;view:web:FileDownloadView&rsquo; required?</strong> This is a special Servlet that guarantees you get the file content directly. Without it, you would see your HTML contents as a view within your current web profile. As you can see, the first example looks clearer and causes less confusion.</p>
<h2 id="nosnoop">noSnoop</h2>
<p>HTML and CSS content served from the file system for all versions of Niagara snoops the content being served. For instance, &lsquo;module&rsquo; ORD schemes are replaced with <code>/module/</code> servlet requests.</p>
<p>This can cause some unwanted consequences and confusion for web developers. This snooping can be disabled for HTML by adding this to the top of the file:</p>
<pre><code class="html">&lt;!-- @noSnoop --&gt;
</code></pre>
<p>The snooping for CSS can be disabled by adding this to the top of the file:</p>
<pre><code class="css">/* @noSnoop */
</code></pre>
<h2 id="requirejs-config">RequireJS Config</h2>
<p>When serving static content from the Station&rsquo;s file system you may want to load BajaScript, d3, jQuery, underscore and other libraries in your own JavaScript modules. From Niagara 4.4 onwards, the configuration information can be referenced via the &lsquo;/requirejs/config.js&rsquo; path. To demonstrate here&rsquo;s a vanilla HTML file that could be placed in a Station&rsquo;s shared folder&hellip;</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;!-- @noSnoop --&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;This is a BajaScript test page&lt;/title&gt;
  &lt;script type='text/javascript'  src='/requirejs/config.js'&gt;&lt;/script&gt;
  &lt;script type='text/javascript'  src='/module/js/com/tridium/js/ext/require/require.min.js?'&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;BajaScript test page!&lt;/h1&gt;
  &lt;script&gt;
    require([&quot;baja!&quot;], function (baja) {
      baja.Ord.make('station:|slot:/').get()
        .then((station) =&gt; {
          alert('Station name: ' + station.get('stationName'));
        });
    });
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h2 id="viewing-niagara-help-in-a-browser-served-as-static-html-files">Viewing Niagara Help in a browser (served as static HTML files)</h2>
<p>Niagara Help documents can also be served as static HTML resources and viewed from a web browser. A few common ways of accessing help are,</p>
<ul>
  <li>Changing the address bar to navigate to a help page. For example: <code>http://yourIPAddress/ord/module://workbench/com/tridium/workbench/media/contents.html</code></li>
  <li>As a hyperlink on a Px View.</li>
  <li>As a hyperlink on a HTML5 or Hx View.</li>
</ul>
<p>Help pages do not need a profile, and it is recommended that they be viewed in a popup. This will ensure there is no web shell surrounding the help pages. For example, if you want to launch help on click of a hyperlink or button in the Web UI, simply call the Hx utility function to do it for you,</p>
<pre><code class="javascript">  hx.popup(&quot;/ord/module://workbench/com/tridium/workbench/media/contents.html&quot;);
</code></pre>
<h2 id="what-else">What else?</h2>
<p>The way we use script tags for injecting BajaScript has changed in Niagara 4. Click <a href="uiFromAxToN4.html">here</a> to find out more information.</p>

<script type='text/javascript'>window.niagara.docDevUtil.highlightCode();</script>

<!-- Auto-generated Footer NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/ui/uiChangelog.html" class="navbar">Prev</a> |  <a href="/doc/requirejs.html" class="navbar">Next</a></p>
<!-- Auto-generated copyright note --><p class='copyright'></p>
</body>
</html>
