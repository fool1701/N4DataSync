<!-- Htmldoc has been run -->
<!--
   @author    Brian Frank
   @creation  2 Oct 01
   @version   $Revision$ $Date$
   @since     Niagara 3.0
 -->
 
<html>

<head>
<title>Links</title>
<link rel='stylesheet' href='module://docDeveloper/rc/sunlight.default.css'>
<!-- Auto-generated style sheet link --><link rel='StyleSheet' href='module://bajaui/doc/style.css' type='text/css' />
<!-- Auto-generated js link for Activity Monitoring --><script type='text/javascript' src='module://web/rc/util/activityMonitor.js'></script>
<script type='text/javascript'>window.addEventListener('load', activityMonitor.start);</script>
</head>

<body>
<!-- Auto-generated Header NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/naming.html" class="navbar">Prev</a> |  <a href="/doc/execution.html" class="navbar">Next</a></p>


<script type='text/javascript' src='module://docDeveloper/rc/sunlight-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/sunlight.java-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/niagara-sunlight-support.js'></script>

<!-- Title Block -->
<h1 class='title'>Links</h1> 

<!------------------------------------------------------------->
<h1>Overview</h1>
<!------------------------------------------------------------->

<p>
Links are the basic mechanism of execution flow in the Niagara
Framework.  Links allow components to be wired together graphically 
by propagating an event on one slot to another slot.  An event 
occurs:
</p>

<ul>
<li>When property slot of a <code><a href='module://docDeveloper/doc/baja-rt/javax/baja/sys/BComponent.bajadoc'>BComponent</a></code> 
is modified.</li> 
<li>When an action slot is invoked.</li>
<li>When a topic slot is fired.</li>
</ul>

<!------------------------------------------------------------->
<h1>Links</h1>
<!------------------------------------------------------------->

<p>
A link is used to establish an event relationship between two 
slots.  There are two sides to the relationship:
</p>

<ul>
<li><b>Source</b>: The source of the link is the <code>BComponent</code>
generating the event either because one of its properties is modified, or
one of its actions is invoked, or one of its topics is fired.  The source
of a link is always passive in that it has no effect on the component itself.</li>
<li><b>Target</b>: The target is the active side of the link.  The
target <code>BComponent</code> responds to an event from the source.</li>
</ul>

<p>
A link is established using a property slot on the <i>target</i> 
<code>BComponent</code> which is an instance of <code>
<a href='module://docDeveloper/doc/baja-rt/javax/baja/sys/BLink.bajadoc'>BLink</a>
</code>. The <code>BLink</code> struct stores:
</p>

<ul>
<li><b>Source Ord</b>: identifier for the source <code>BComponent</code>;</li>
<li><b>Source Slot</b>: name of the source component's slot;</li>
<li><b>Target Slot</b>: name of the target component's slot to act upon;</li>
</ul> 

<p class='note'>
Note: The target ord is not stored explicitly in a <code>BLink</code> because
it is implicitly derived by being a direct child of the target component.
</p>

<p>
The following table diagrams how slots may be linked together:
</p>

<p>
<table border='1' cellspacing='0'>
<tr><th>Source</th><th>Target</th><th align='left'>Semantics</th></tr>

<tr><td>Property</td><td>Property</td>
<td>When source property changes, set the target property</td></tr>

<tr><td>Property</td><td>Action</td>
<td>When source property changes, invoke the action</td></tr>

<tr><td>Action</td><td>Action</td>
<td>When source action is invoked, invoke target action (action chaining)</td></tr>

<tr><td>Action</td><td>Topic</td>
<td>When source action fires, fire target topic</td></tr>

<tr><td>Topic</td><td>Action</td>
<td>When source topic fires, invoke the action</td></tr>

<tr><td>Topic</td><td>Topic</td>
<td>When source topic fires, fire target topic (topic chaining)</td></tr>

</table>
</p>

<!------------------------------------------------------------->
<h1>Link Check</h1>
<!------------------------------------------------------------->

<p>
Every component has a set of predefined rules which allow links
to be established.  These rules are embodied in the 
<code><a href='module://docDeveloper/doc/baja-rt/javax/baja/sys/LinkCheck.bajadoc'>LinkCheck</a></code>
class.  Subclasses may override the <code>BComponent.doLinkCheck()</code>
method to provide additional link checking.
</p>

<!------------------------------------------------------------->
<h1>Direct and Indirect Links</h1>
<!------------------------------------------------------------->

<p>
Links are constructed as either <i>direct</i> or <i>indirect</i>.  A
direct link is constructed with a direct Java reference to its source
<code>BComponent</code>, source slot, and target slot.  A direct link 
may be created at anytime.  Neither the source nor target components 
are required to be mounted or running.  These links must be explicitly 
removed by the developer.  Direct links are never persisted. Examples 
of creating direct links:
</p>

<pre>
  <code class="sunlight-highlight-java">
  target.linkTo("linkA", source, source.slot, target.slot);
  </code>
</pre>
    ...or...
  
<pre>
  <code class="sunlight-highlight-java">
  BLink link = new BLink(source, source.slot, target.slot);
  target.add("linkA", link);
  link.activate();
  </code>
</pre>

<p>
An indirect link is created through indirect names.  A BOrd specifies
the source component and Strings are used for the source and target slot
names.  Since an indirect link requires resolution of a BOrd to get its
source component, the source is required to be mounted when the link is
activated.  Indirect links are automatically removed if their source 
component is unmounted while the link is activated.  Examples of creating 
an indirect link:
</p>

<pre>
  <code class="sunlight-highlight-java">
  BLink link = new BLink(BOrd.make("h:77"), "sourceSlot", "targetSlot");
  target.add("linkA", link);
  </code>
</pre>

<p class='note'>
Note: Links are rarely created programmatically, but rather are configured
using the graphical programming tools.  The major exception to this rule
is building GUIs in code.  In this case it is best to establish direct links
in your constructor.
</p>

<!------------------------------------------------------------->
<h1>Activation</h1>
<!------------------------------------------------------------->

<p>
Links exist in either an <i>activated</i> or <i>deactivated</i> state.
When a link is activated it is actively propagating events from the
source slot to the target slot.  Activated links also maintain a 
<code><a href='module://docDeveloper/doc/baja-rt/javax/baja/sys/Knob.bajadoc'>Knob</a></code>
on the source component.  Knobs are basically a mirror image of a link
stored on the source component to indicate the source is actively propagating
events over one or more links.  When a link is deactivated event propagation
ceases and the Knob is removed from the source component.
</p>

<p>
Activation:
<p>
<ol>
<li>Links are activated when the <code>BLink.activate()</code> method 
  is called.  If the link is indirect, then the source ord must be 
  resolvable otherwise an <code>UnresolvedException</code> is thrown.</li>
<li>If creating a direct link using the <code>BComponent.linkTo()</code> 
  method the link is automatically activated.</li>
<li>Enabled links are activated during <code>BComponent</code> start.  This 
  is how most indirect links are activated (at station boot time).</li>
<li>Anytime a <code>BLink</code> value is added as a dynamic property 
  on a running <code>BComponent</code> it is activated.</li>
</ol>

<p>
Deactivation:
</p>
<ol>
<li>Links are deactivated when the <code>BLink.deactivate()</code> method 
  is called.</li>
<li>Anytime a property with a <code>BLink</code> value is removed 
  from <code>BComponent</code> it is deactivated and the target property 
  is set back to its default value.</li>
<li>Anytime the source component of a active <i>indirect</i> link is unmounted, 
  the link is deactivated and removed from the target component.</li>
</ol>

<script type="text/javascript">
    window.niagara.docDevUtil.highlightCode();
</script>

<!-- Auto-generated Footer NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/naming.html" class="navbar">Prev</a> |  <a href="/doc/execution.html" class="navbar">Next</a></p>
<!-- Auto-generated copyright note --><p class='copyright'></p>
</body>
</html>
