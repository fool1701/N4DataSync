<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title>bajaScript Tutorial: Extending BajaScript with Type Extensions</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	<link type="text/css" rel="stylesheet" href="styles/site.cerulean.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html">bajaScript</a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="baja.html">baja</a></li><li><a href="baja.bson.html">baja.bson</a></li><li><a href="baja.clock.html">baja.clock</a></li><li><a href="baja.coll.html">baja.coll</a></li><li><a href="baja.comm.html">baja.comm</a></li><li><a href="baja.event.html">baja.event</a></li><li><a href="baja.file.html">baja.file</a></li><li><a href="baja.nav.html">baja.nav</a></li><li><a href="baja.registry.html">baja.registry</a></li><li><a href="baja.transfer.html">baja.transfer</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="modules.list.html" class="dropdown-toggle" data-toggle="dropdown">Modules<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="module-baja_alarm_AlarmArchiveSpace.html">baja/alarm/AlarmArchiveSpace</a></li><li><a href="module-baja_alarm_AlarmSpace.html">baja/alarm/AlarmSpace</a></li><li><a href="module-baja_coll_QueryCursor.html">baja/coll/QueryCursor</a></li><li><a href="module-baja_coll_QueryResult.html">baja/coll/QueryResult</a></li><li><a href="module-baja_coll_Table.html">baja/coll/Table</a></li><li><a href="module-baja_coll_TableCursor.html">baja/coll/TableCursor</a></li><li><a href="module-baja_coll_tableMixIn.html">baja/coll/tableMixIn</a></li><li><a href="module-baja_comm_Batch.html">baja/comm/Batch</a></li><li><a href="module-baja_comm_ServerError.html">baja/comm/ServerError</a></li><li><a href="module-baja_comp_Action.html">baja/comp/Action</a></li><li><a href="module-baja_comp_ActionProperty.html">baja/comp/ActionProperty</a></li><li><a href="module-baja_comp_Complex.html">baja/comp/Complex</a></li><li><a href="module-baja_comp_Component.html">baja/comp/Component</a></li><li><a href="module-baja_comp_ComponentSpace.html">baja/comp/ComponentSpace</a></li><li><a href="module-baja_comp_ControlPoint.html">baja/comp/ControlPoint</a></li><li><a href="module-baja_comp_DynamicProperty.html">baja/comp/DynamicProperty</a></li><li><a href="module-baja_comp_Flags.html">baja/comp/Flags</a></li><li><a href="module-baja_comp_Host.html">baja/comp/Host</a></li><li><a href="module-baja_comp_LinkCheck.html">baja/comp/LinkCheck</a></li><li><a href="module-baja_comp_LocalHost.html">baja/comp/LocalHost</a></li><li><a href="module-baja_comp_Property.html">baja/comp/Property</a></li><li><a href="module-baja_comp_PropertyAction.html">baja/comp/PropertyAction</a></li><li><a href="module-baja_comp_PropertyTopic.html">baja/comp/PropertyTopic</a></li><li><a href="module-baja_comp_Slot.html">baja/comp/Slot</a></li><li><a href="module-baja_comp_SlotCursor.html">baja/comp/SlotCursor</a></li><li><a href="module-baja_comp_Struct.html">baja/comp/Struct</a></li><li><a href="module-baja_comp_Subscriber.html">baja/comp/Subscriber</a></li><li><a href="module-baja_comp_Topic.html">baja/comp/Topic</a></li><li><a href="module-baja_comp_TopicProperty.html">baja/comp/TopicProperty</a></li><li><a href="module-baja_file_File.html">baja/file/File</a></li><li><a href="module-baja_hist_HistorySpace.html">baja/hist/HistorySpace</a></li><li><a href="module-baja_nav_event.html">baja/nav/event</a></li><li><a href="module-baja_nav_FileNavContainer.html">baja/nav/FileNavContainer</a></li><li><a href="module-baja_nav_NavContainer.html">baja/nav/NavContainer</a></li><li><a href="module-baja_nav_NavFileSpace.html">baja/nav/NavFileSpace</a></li><li><a href="module-baja_nav_NavNode.html">baja/nav/NavNode</a></li><li><a href="module-baja_nav_NavNodeContainer.html">baja/nav/NavNodeContainer</a></li><li><a href="module-baja_nav_NavRoot.html">baja/nav/NavRoot</a></li><li><a href="module-baja_obj_AbsTime.html">baja/obj/AbsTime</a></li><li><a href="module-baja_obj_Boolean.html">baja/obj/Boolean</a></li><li><a href="module-baja_obj_Date.html">baja/obj/Date</a></li><li><a href="module-baja_obj_DaysOfWeekBits.html">baja/obj/DaysOfWeekBits</a></li><li><a href="module-baja_obj_DefaultSimple.html">baja/obj/DefaultSimple</a></li><li><a href="module-baja_obj_Dimension.html">baja/obj/Dimension</a></li><li><a href="module-baja_obj_Double.html">baja/obj/Double</a></li><li><a href="module-baja_obj_DynamicEnum.html">baja/obj/DynamicEnum</a></li><li><a href="module-baja_obj_Enum.html">baja/obj/Enum</a></li><li><a href="module-baja_obj_EnumRange.html">baja/obj/EnumRange</a></li><li><a href="module-baja_obj_EnumSet.html">baja/obj/EnumSet</a></li><li><a href="module-baja_obj_Facets.html">baja/obj/Facets</a></li><li><a href="module-baja_obj_FacetsMap.html">baja/obj/FacetsMap</a></li><li><a href="module-baja_obj_Float.html">baja/obj/Float</a></li><li><a href="module-baja_obj_Format.html">baja/obj/Format</a></li><li><a href="module-baja_obj_FrozenEnum.html">baja/obj/FrozenEnum</a></li><li><a href="module-baja_obj_Icon.html">baja/obj/Icon</a></li><li><a href="module-baja_obj_Integer.html">baja/obj/Integer</a></li><li><a href="module-baja_obj_Long.html">baja/obj/Long</a></li><li><a href="module-baja_obj_Marker.html">baja/obj/Marker</a></li><li><a href="module-baja_obj_NameList.html">baja/obj/NameList</a></li><li><a href="module-baja_obj_NameMap.html">baja/obj/NameMap</a></li><li><a href="module-baja_obj_Object.html">baja/obj/Object</a></li><li><a href="module-baja_obj_Password.html">baja/obj/Password</a></li><li><a href="module-baja_obj_Permissions.html">baja/obj/Permissions</a></li><li><a href="module-baja_obj_PermissionsMap.html">baja/obj/PermissionsMap</a></li><li><a href="module-baja_obj_RelTime.html">baja/obj/RelTime</a></li><li><a href="module-baja_obj_Simple.html">baja/obj/Simple</a></li><li><a href="module-baja_obj_Singleton.html">baja/obj/Singleton</a></li><li><a href="module-baja_obj_Status.html">baja/obj/Status</a></li><li><a href="module-baja_obj_StatusValue.html">baja/obj/StatusValue</a></li><li><a href="module-baja_obj_Time.html">baja/obj/Time</a></li><li><a href="module-baja_obj_TimeZone.html">baja/obj/TimeZone</a></li><li><a href="module-baja_obj_TimeZoneDatabase.html">baja/obj/TimeZoneDatabase</a></li><li><a href="module-baja_obj_Unit.html">baja/obj/Unit</a></li><li><a href="module-baja_obj_UnitDatabase.html">baja/obj/UnitDatabase</a></li><li><a href="module-baja_obj_Value.html">baja/obj/Value</a></li><li><a href="module-baja_ord_AlarmScheme.html">baja/ord/AlarmScheme</a></li><li><a href="module-baja_ord_BatchResolve.html">baja/ord/BatchResolve</a></li><li><a href="module-baja_ord_BogScheme.html">baja/ord/BogScheme</a></li><li><a href="module-baja_ord_FileScheme.html">baja/ord/FileScheme</a></li><li><a href="module-baja_ord_FoxScheme.html">baja/ord/FoxScheme</a></li><li><a href="module-baja_ord_HandleScheme.html">baja/ord/HandleScheme</a></li><li><a href="module-baja_ord_HierarchyScheme.html">baja/ord/HierarchyScheme</a></li><li><a href="module-baja_ord_HistoryScheme.html">baja/ord/HistoryScheme</a></li><li><a href="module-baja_ord_HttpScheme.html">baja/ord/HttpScheme</a></li><li><a href="module-baja_ord_IpScheme.html">baja/ord/IpScheme</a></li><li><a href="module-baja_ord_LocalScheme.html">baja/ord/LocalScheme</a></li><li><a href="module-baja_ord_NSpaceScheme.html">baja/ord/NSpaceScheme</a></li><li><a href="module-baja_ord_Ord.html">baja/ord/Ord</a></li><li><a href="module-baja_ord_OrdList.html">baja/ord/OrdList</a></li><li><a href="module-baja_ord_OrdQuery.html">baja/ord/OrdQuery</a></li><li><a href="module-baja_ord_OrdQueryList.html">baja/ord/OrdQueryList</a></li><li><a href="module-baja_ord_OrdQueryListCursor.html">baja/ord/OrdQueryListCursor</a></li><li><a href="module-baja_ord_OrdScheme.html">baja/ord/OrdScheme</a></li><li><a href="module-baja_ord_OrdTarget.html">baja/ord/OrdTarget</a></li><li><a href="module-baja_ord_ServiceScheme.html">baja/ord/ServiceScheme</a></li><li><a href="module-baja_ord_SlotPath.html">baja/ord/SlotPath</a></li><li><a href="module-baja_ord_SlotScheme.html">baja/ord/SlotScheme</a></li><li><a href="module-baja_ord_StationScheme.html">baja/ord/StationScheme</a></li><li><a href="module-baja_ord_UnknownScheme.html">baja/ord/UnknownScheme</a></li><li><a href="module-baja_ord_ViewQuery.html">baja/ord/ViewQuery</a></li><li><a href="module-baja_ord_ViewScheme.html">baja/ord/ViewScheme</a></li><li><a href="module-baja_ord_VirtualPath.html">baja/ord/VirtualPath</a></li><li><a href="module-baja_ord_VirtualScheme.html">baja/ord/VirtualScheme</a></li><li><a href="module-baja_sys_bajaUtils.html">baja/sys/bajaUtils</a></li><li><a href="module-baja_sys_inherit.html">baja/sys/inherit</a></li><li><a href="module-baja_sys_structures_AsyncCursor.html">baja/sys/structures/AsyncCursor</a></li><li><a href="module-baja_sys_structures_Cursor.html">baja/sys/structures/Cursor</a></li><li><a href="module-baja_sys_structures_FilterCursor.html">baja/sys/structures/FilterCursor</a></li><li><a href="module-baja_sys_structures_SyncCursor.html">baja/sys/structures/SyncCursor</a></li><li><a href="module-baja_tag_BasicEntity.html">baja/tag/BasicEntity</a></li><li><a href="module-baja_tag_BRelation.html">baja/tag/BRelation</a></li><li><a href="module-baja_tag_ComponentRelations.html">baja/tag/ComponentRelations</a></li><li><a href="module-baja_tag_ComponentTags.html">baja/tag/ComponentTags</a></li><li><a href="module-baja_tag_entityDecoder.html">baja/tag/entityDecoder</a></li><li><a href="module-baja_tag_Id.html">baja/tag/Id</a></li><li><a href="module-baja_tag_Relation.html">baja/tag/Relation</a></li><li><a href="module-baja_tag_RelationSet.html">baja/tag/RelationSet</a></li><li><a href="module-baja_tag_RelationTags.html">baja/tag/RelationTags</a></li><li><a href="module-baja_tag_SmartRelation.html">baja/tag/SmartRelation</a></li><li><a href="module-baja_tag_SmartTags.html">baja/tag/SmartTags</a></li><li><a href="module-baja_tag_Tag.html">baja/tag/Tag</a></li><li><a href="module-baja_tag_TagSet.html">baja/tag/TagSet</a></li><li><a href="module-baja_virt_VirtualComponent.html">baja/virt/VirtualComponent</a></li><li><a href="module-baja_virt_VirtualComponentSpace.html">baja/virt/VirtualComponentSpace</a></li><li><a href="module-baja_virt_VirtualGateway.html">baja/virt/VirtualGateway</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="baja.AbsTime.html">baja.AbsTime</a></li><li><a href="baja.Action.html">baja.Action</a></li><li><a href="baja.ActionProperty.html">baja.ActionProperty</a></li><li><a href="baja.AsyncCursor.html">baja.AsyncCursor</a></li><li><a href="baja.BaseBajaObj.html">baja.BaseBajaObj</a></li><li><a href="baja.BatchResolve.html">baja.BatchResolve</a></li><li><a href="baja.coll.QueryResult.html">baja.coll.QueryResult</a></li><li><a href="baja.coll.Table.html">baja.coll.Table</a></li><li><a href="baja.comm.Batch.html">baja.comm.Batch</a></li><li><a href="baja.Complex.html">baja.Complex</a></li><li><a href="baja.Component.html">baja.Component</a></li><li><a href="baja.ComponentSpace.html">baja.ComponentSpace</a></li><li><a href="baja.Cursor.html">baja.Cursor</a></li><li><a href="baja.Date.html">baja.Date</a></li><li><a href="baja.DaysOfWeeksBits.html">baja.DaysOfWeeksBits</a></li><li><a href="baja.DefaultSimple.html">baja.DefaultSimple</a></li><li><a href="baja.Dimension.html">baja.Dimension</a></li><li><a href="baja.Double.html">baja.Double</a></li><li><a href="baja.DynamicEnum.html">baja.DynamicEnum</a></li><li><a href="baja.Enum.html">baja.Enum</a></li><li><a href="baja.EnumRange.html">baja.EnumRange</a></li><li><a href="baja.EnumSet.html">baja.EnumSet</a></li><li><a href="baja.Facets.html">baja.Facets</a></li><li><a href="baja.FacetsMap.html">baja.FacetsMap</a></li><li><a href="baja.file.File.html">baja.file.File</a></li><li><a href="baja.FilterCursor.html">baja.FilterCursor</a></li><li><a href="baja.Flags.html">baja.Flags</a></li><li><a href="baja.Float.html">baja.Float</a></li><li><a href="baja.Format.html">baja.Format</a></li><li><a href="baja.FrozenEnum.html">baja.FrozenEnum</a></li><li><a href="baja.Host.html">baja.Host</a></li><li><a href="baja.Icon.html">baja.Icon</a></li><li><a href="baja.Integer.html">baja.Integer</a></li><li><a href="baja.LinkCheck.html">baja.LinkCheck</a></li><li><a href="baja.LocalHost.html">baja.LocalHost</a></li><li><a href="baja.Long.html">baja.Long</a></li><li><a href="baja.NameList.html">baja.NameList</a></li><li><a href="baja.NameMap.html">baja.NameMap</a></li><li><a href="baja.NavContainer.html">baja.NavContainer</a></li><li><a href="baja.NavNode.html">baja.NavNode</a></li><li><a href="baja.NavNodeContainer.html">baja.NavNodeContainer</a></li><li><a href="baja.Object.html">baja.Object</a></li><li><a href="baja.Ord.html">baja.Ord</a></li><li><a href="baja.OrdList.html">baja.OrdList</a></li><li><a href="baja.OrdQueryList.html">baja.OrdQueryList</a></li><li><a href="baja.OrdScheme.html">baja.OrdScheme</a></li><li><a href="baja.Permissions.html">baja.Permissions</a></li><li><a href="baja.PermissionsMap.html">baja.PermissionsMap</a></li><li><a href="baja.Property.html">baja.Property</a></li><li><a href="baja.RelTime.html">baja.RelTime</a></li><li><a href="baja.Simple.html">baja.Simple</a></li><li><a href="baja.Singleton.html">baja.Singleton</a></li><li><a href="baja.Slot.html">baja.Slot</a></li><li><a href="baja.SlotPath.html">baja.SlotPath</a></li><li><a href="baja.SlotScheme.html">baja.SlotScheme</a></li><li><a href="baja.Status.html">baja.Status</a></li><li><a href="baja.Struct.html">baja.Struct</a></li><li><a href="baja.Subscriber.html">baja.Subscriber</a></li><li><a href="baja.SyncCursor.html">baja.SyncCursor</a></li><li><a href="baja.Time.html">baja.Time</a></li><li><a href="baja.TimeZone.html">baja.TimeZone</a></li><li><a href="baja.TimeZoneDatabase.html">baja.TimeZoneDatabase</a></li><li><a href="baja.Topic.html">baja.Topic</a></li><li><a href="baja.Unit.html">baja.Unit</a></li><li><a href="baja.UnitDatabase.html">baja.UnitDatabase</a></li><li><a href="baja.Value.html">baja.Value</a></li><li><a href="baja.ViewQuery.html">baja.ViewQuery</a></li><li><a href="baja.VirtualComponent.html">baja.VirtualComponent</a></li><li><a href="baja.VirtualComponentSpace.html">baja.VirtualComponentSpace</a></li><li><a href="baja.VirtualGateway.html">baja.VirtualGateway</a></li><li><a href="baja.VirtualPath.html">baja.VirtualPath</a></li><li><a href="baja.VirtualScheme.html">baja.VirtualScheme</a></li><li><a href="Boolean.html">Boolean</a></li><li><a href="FrozenAction.html">FrozenAction</a></li><li><a href="FrozenProperty.html">FrozenProperty</a></li><li><a href="FrozenTopic.html">FrozenTopic</a></li><li><a href="IntervalTicket.html">IntervalTicket</a></li><li><a href="module-baja_coll_Table.TableColumn.html">baja/coll/Table.TableColumn</a></li><li><a href="module-baja_obj_Format-DecodeFromStringFormatter.html">baja/obj/Format~DecodeFromStringFormatter</a></li><li><a href="module-baja_obj_Format-EscapedPercentSignFormatter.html">baja/obj/Format~EscapedPercentSignFormatter</a></li><li><a href="module-baja_obj_Format-EscapeUnescapeFormatter.html">baja/obj/Format~EscapeUnescapeFormatter</a></li><li><a href="module-baja_obj_Format-IdentityFormatter.html">baja/obj/Format~IdentityFormatter</a></li><li><a href="module-baja_obj_Format-LexiconFormatter.html">baja/obj/Format~LexiconFormatter</a></li><li><a href="module-baja_obj_Format-ReflectCallFormatter.html">baja/obj/Format~ReflectCallFormatter</a></li><li><a href="module-baja_obj_Format-UserFormatter.html">baja/obj/Format~UserFormatter</a></li><li><a href="String.html">String</a></li><li><a href="Ticket.html">Ticket</a></li><li><a href="Type.html">Type</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="mixins.list.html" class="dropdown-toggle" data-toggle="dropdown">Mixins<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="baja.coll.tableMixIn.html">baja.coll.tableMixIn</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="tutorial-gettingStarted.html">Getting Started with BajaScript</a></li><li><a href="tutorial-typeExtensions.html">Extending BajaScript with Type Extensions</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="externals.list.html" class="dropdown-toggle" data-toggle="dropdown">Externals<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="external-Array.html">Array</a></li><li><a href="external-Boolean.html">Boolean</a></li><li><a href="external-Number.html">Number</a></li><li><a href="external-String.html">String</a></li>
				</ul>
			</li>
			
		</ul>
        
            <div class="col-sm-3 col-md-3">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                        <div class="input-group-btn">
                            <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                        </div>
                    </div>
                </form>
            </div>
        
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			<section class="tutorial-section">

<header>
    

    <h2>Extending BajaScript with Type Extensions</h2>
</header>

<article>
    <p>BajaScript is a subset of Niagara's functionality made available through the browser using JavaScript. While the basic Type system and Object Model come built-in, along with support for many of the Components and Simples provided with Niagara, you may want to extend BajaScript's capabilities further. One way to accomplish this is through the Type Extension API.</p>
<h2>What are Type Extensions?</h2>
<p>A Type Extension extends BajaScript itself to provide a JavaScript implementation of a Niagara Simple or Complex Type. It can provide additional functionality not provided by the built-in <code>baja.Simple</code>, <code>baja.Struct</code>, or <code>baja.Component</code> classes.</p>
<h2>Why would I want to use a Type Extension?</h2>
<p>Without a Type Extension, a Niagara object in the browser will provide only a minimal API:</p>
<ul>
<li>For Simples: <code>encodeToString()</code>, <code>decodeFromString()</code>, etc.</li>
<li>For Structs: <code>get()</code>, <code>set()</code>, etc.</li>
<li>For Components: Struct functions plus <code>add()</code>, <code>remove()</code>, etc.</li>
</ul>
<p>But if you have your own custom Niagara Types, you will probably want customized API associated with them in the browser. For example:</p>
<ul>
<li><code>toString()</code> should provide info specific to that Type</li>
<li>Getters and setters apart from existing Slots</li>
<li>Logic functions to calculate data based on Slot values</li>
<li>Provide custom Slot Facets</li>
</ul>
<p>To accomplish these and more, Type Extensions are the way to go.</p>
<h2>How do I use Type Extensions?</h2>
<p>To make use of a Type Extension, you must complete the following:</p>
<ul>
<li>Create a JavaScript implementation of the Niagara Type.</li>
<li>Create a Niagara Type that registers your JavaScript with the framework.</li>
<li>Create an Agent registration that associates your JavaScript with the Niagara Type it implements.</li>
</ul>
<p>Because all the pieces must be in place for the Type Extension to work, it can be tricky to implement each one in isolation. This guide will walk you through the process to show you the easiest path forward. We will implement a Simple first, because Simples are actually a bit trickier to implement than Complexes. The subsequent Complex example will then be a piece of cake.</p>
<blockquote>
<p><em>Note:</em> the JavaScript examples will use ES6 class syntax, and therefore presume you are using <code>grunt-niagara</code> version 2 or higher. If you are using <code>grunt-niagara</code> version 1 and choose not to upgrade, no worries - Type Extensions work just fine using ES5 prototypes.</p>
</blockquote>
<h2>Implementing a Type Extension</h2>
<p>For the example, we'll create an implementation of <code>gx:Size</code>. <code>Size</code> makes a great example because it demonstrates the benefits of having a Type Extension while still being quite simple, so it's easy to follow along in the development process. However, since a Type Extension for <code>Size</code> already exists, we'll make our own called <code>DemoSize</code>. This will be a BajaScript Type Extension that implements our own Niagara Simple, <code>typeExtensionDemo:DemoSize</code>. We won't look at the implementation for <code>BDemoSize</code> in this guide, but it's provided in the attached source.</p>
<p>To implement a Simple, the following four features are required:</p>
<ul>
<li><code>encodeToString()</code>: encodes the Simple instance to a string to be used when sending up to the Station.</li>
<li><code>decodeFromString()</code>: decodes a string encoding sent from a Station to an instance of your Simple in the browser.</li>
<li><code>make()</code>: constructs a new instance of your Simple.</li>
<li><code>DEFAULT</code>: the default instance of your Simple.</li>
</ul>
<p>Let's begin by creating DemoSize.js. By convention we usually place Type Extension implementations in <code>src/rc/baja</code>, but they can go wherever you like. We'll add dummy implementations of the core Simple functions just to get the code running - they won't be correct, but without them, BajaScript can't even create an instance to test with.</p>
<pre><code>define([ 'baja!' ], function (baja) {
  'use strict';

  class DemoSize extends baja.Simple {
    encodeToString() { return ''; }
    decodeFromString() { return new DemoSize(); }
    make() { return new DemoSize(); }
    static get DEFAULT() { return DEFAULT; }
  }

  const DEFAULT = new DemoSize();

  return DemoSize;
});
</code></pre>
<p>And of course, DemoSizeSpec.js:</p>
<pre><code>define([
  'baja!',
  'baja!typeExtensionDemo:DemoSize',
  'nmodule/typeExtensionDemo/rc/baja/DemoSize' ], function (
  baja,
  types,
  DemoSize) {
  
  'use strict';
  
  describe('nmodule/typeExtensionDemo/rc/baja/DemoSize', () =&gt; {
    it('is registered on typeExtensionDemo:DemoSize', () =&gt; {
      expect(baja.$('typeExtensionDemo:DemoSize')).toEqual(jasmine.any(DemoSize));
    });
  });
});
</code></pre>
<p>Take a look at the one spec (which is failing). What we want is when we instantiate our Niagara Type <code>typeExtensionDemo:DemoSize</code> in the browser, we get an instance of our own <code>DemoSize</code> class. But since we're missing the right configuration in Java, we don't - BajaScript just gives us a plain <code>baja.Simple</code>. Let's fix that!</p>
<p>To do this, we'll implement a Niagara Type which both extends <code>BBajaScriptTypeExt</code> and is an agent on <code>BDemoSize</code>:</p>
<pre><code>@NiagaraType(agent = @AgentOn(types = &quot;typeExtensionDemo:DemoSize&quot;))
@NiagaraSingleton
public final class BDemoSizeTypeExt
  extends BBajaScriptTypeExt
  implements BIOffline
{
  private BDemoSizeTypeExt() {}

  @Override
  public JsInfo getTypeExtJs(Context cx) { return JS_INFO; }

  private static final JsInfo JS_INFO = JsInfo.make(
    BOrd.make(&quot;module://typeExtensionDemo/rc/baja/DemoSize.js&quot;),
    BTypeExtensionDemoJsBuild.TYPE);
}
</code></pre>
<p>Take note of a couple things here.</p>
<ul>
<li>Our Type Extension implements <code>BIOffline</code>. This marks it as being supported when using BajaScript in an offline context: that is, not talking to a running Station. For example, working with a .bog file in Workbench is an offline context. Without this marker interface, our Type Extension will not be used when offline.</li>
<li>We specify a <code>BJsBuild</code> type to indicate what minified JavaScript file our Type Extension code will get packaged into. For more details, see <em>Building JavaScript Applications</em> in Workbench Help.</li>
</ul>
<p>We'll have to Slotomatic and rebuild to get our new class into the registry. Now our spec passes! Whenever we use BajaScript to instantiate a <code>typeExtensionDemo:DemoSize</code>, we'll get an instance of our <code>DemoSize</code> class. This includes accessing any Slot value from a Struct or Component, where the value is of type <code>typeExtensionDemo:DemoSize</code>! Now we can add whatever functionality we want to it, and it will be available throughout our application (or our customers' applications) when working with instances of our type.</p>
<pre><code>class DemoSize extends baja.Simple {
  constructor(width, height) {
    super();
    this.$width = width;
    this.$height = height;
  }

  /**
   * @returns {string}
   */
  encodeToString() { return this.$width + ',' + this.$height; }

  /**
   * @param {string} str
   * @returns {module:nmodule/typeExtensionDemo/rc/baja/DemoSize}
   */
  decodeFromString(str) { return new DemoSize(...str.split(',').map(parseFloat)); }

  /**
   * @param {number} width
   * @param {number} height
   * @returns {module:nmodule/typeExtensionDemo/rc/baja/DemoSize}
   */
  make(width, height) { return new DemoSize(width, height); }

  /**
   * @returns {number}
   */
  getWidth() { return this.$width; }

  /**
   * @returns {number}
   */
  getHeight() { return this.$height; }
  
  /**
   * @returns {string}
   */
  toString() { return `Width: ${ this.$width } Height: ${ this.$height }`; }

  /**
   * @returns {module:nmodule/typeExtensionDemo/rc/baja/DemoSize}
   */
  static get DEFAULT() { return DEFAULT; }
}
</code></pre>
<p>Compare this with the experience of working with <code>DemoSize</code> instances without a Type Extension. It would require the constant use of helper functions to parse the string encodings to usable numbers, and re-encode them when saving them to the station. Now we have a JavaScript class that encapsulates this behavior and represents the important functionality provided by the Java version. We can simply call <code>getWidth()</code>/<code>getHeight()</code> without thinking about parsing string encodings.</p>
<p>Type Extensions for Structs and Components work exactly the same way, but are even easier. Complexes don't require <code>encodeToString()</code>, <code>decodeFromString()</code>, etc. You can simply extend the appropriate type:</p>
<pre><code>define([ 'baja!' ], function (baja) {
  'use strict';
  
  return class DemoComponent extends baja.Component {
    toString() { return 'I am a DemoComponent!'; }
  };
});
</code></pre>
<h2>Demo Source Code</h2>
<p>A full example module can be found in the <code>dev/typeExtensionDemo</code> folder of the downloaded Niagara image.</p>
</article>

</section>

		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>


    <div class="modal fade" id="searchResults">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">Search results</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>


<footer>


	<span class="copyright">
	bajaScript Copyright © 2024 Tridium. DocStrap Copyright © 2012-2013 the contributors to the JSDoc3 and DocStrap projects.
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a>
	
		on 2024-05-03T00:28:50+00:00
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>

    <script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>


<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre, pre.prettyprint.source" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->


<!--Google Analytics-->



    <script type="text/javascript">
        $(document).ready(function() {
            SearcherDisplay.init();
        });
    </script>


</body>
</html>