<!-- Htmldoc has been run -->
<!--
   @author    Brian Frank
   @creation  3 Jul 03
   @version   $Revision$ $Date$
   @since     Niagara 3.0
 -->
 
<html>

<head>
<title>Naming</title>
<link rel='stylesheet' href='module://docDeveloper/rc/sunlight.default.css'>
<!-- Auto-generated style sheet link --><link rel='StyleSheet' href='module://bajaui/doc/style.css' type='text/css' />
<!-- Auto-generated js link for Activity Monitoring --><script type='text/javascript' src='module://web/rc/util/activityMonitor.js'></script>
<script type='text/javascript'>window.addEventListener('load', activityMonitor.start);</script>
</head>

<body>
<!-- Auto-generated Header NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/collections.html" class="navbar">Prev</a> |  <a href="/doc/links.html" class="navbar">Next</a></p>

<script type='text/javascript' src='module://docDeveloper/rc/sunlight-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/sunlight.java-min.js'></script>
<script type='text/javascript' src='module://docDeveloper/rc/niagara-sunlight-support.js'></script>

<!-- Title Block -->
<h1 class='title'>Naming</h1> 

<!------------------------------------------------------------->
<h1>Overview</h1>
<!------------------------------------------------------------->

<p>
Niagara provides a uniform naming system to identify any resource
which may be represented using an instance of <code>BObject</code>.
These names are called <i>ords</i> for <b>O</b>bject <b>R</b>esolution
<b>D</b>escriptor.  You can think of a ords as URIs on steroids.
</p>

<p>
An ord is a list of one or more queries separated by the "|" pipe
symbol.  Each query is an ASCII string formatted as "&lt;scheme&gt;:&lt;body&gt;".
The scheme name is a globally unique identifier which instructs Niagara
how to find a piece of code to lookup an object from the body string.  
The body string is opaque and is formatted differently depending on 
the scheme.  The only rule is that it can't contain a pipe symbol.
</p>

<p>
Queries can be piped together to let each scheme focus on how to
lookup a specific type of object.  In general absolute ords are of
the format: <code>host | session | space</code>.  Some examples:
</p>

<pre>
ip:somehost|fox:|file:/dir/somefile.txt
ip:somehost|fox:1912|station:|slot:/Graphics/Home
local:|module://icons/x16/cut.png
</pre>

<p>
In the examples above note that the "ip" scheme is used to identify
a host machine using an IP address.  The "fox" scheme specifies a
session to that machine usually on a specific IP port number.  In
the first example we identify an instance of a file within somehost's 
file system.  In the second example we identify a specific component 
in the station database.
</p>

<p>
The third example illustrates a special case.  The scheme "local"
which always resolves to <code>BLocalHost.INSTANCE</code> is both
a host scheme and a session scheme.  It represents objects found
within the local VM.
</p>

<!------------------------------------------------------------->
<h1>APIs</h1>
<!------------------------------------------------------------->

<p>
The core naming APIs are defined in the
<code><a href='module://docDeveloper/doc/baja-rt/javax/baja/naming/package-index.bajadoc'>javax.baja.naming</a></code>
package.  Ords are represented using the 
<code><a href='module://docDeveloper/doc/baja-rt/javax/baja/naming/BOrd.bajadoc'>BOrd</a></code>
class.
</p>

<p>
Ords may be resolved using the <code>BOrd.resolve()</code> or 
<code>BOrd.get()</code> methods.  The <code>resolve</code> method 
returns an intermediate <code>OrdTarget</code> that provides 
contextual information about how the ord was resolved.  The <code>get</code>
method is a convenience for <code>resolve().get()</code>. 
</p>

<p> 
Ords may be absolute or relative.  When resolving a relative ord
you must pass in a base object.  If no base object is specified
then <code>BLocalHost.INSTANCE</code> is assumed.  Some simple
examples of resolving an ord:
</p>

<pre>
  <code class="sunlight-highlight-java">
BIFile f1 = (BIFile)BOrd.make("module://icons/x16/cut.png").get();
BIFile f2 = (BIFile)BOrd.make("file:somefile.txt").get(baseDir);
  </code>
</pre>

<!------------------------------------------------------------->
<h1>Parsing</h1>
<!------------------------------------------------------------->

<p>
Ords may be parsed into their constituent queries using the 
method <code>BOrd.parse()</code> which returns <code>OrdQuery[]</code>.  
In many cases you might cast a OrdQuery into a concrete class.  For
example:
</p>

<pre>
  <code class="sunlight-highlight-java">
// dump the names in the file path
BOrd ord = BOrd.make("file:/a/b/c.txt");
OrdQuery[] queries = ord.parse();
FilePath path = (FilePath)queries[0];
for(int i=0; i&lt;path.depth(); ++i)
  System.out.println("path[" + i + "] = " + path.nameAt(i));
  </code>
</pre>

<!------------------------------------------------------------->
<h1>Common Schemes</h1>
<!------------------------------------------------------------->

<p>
The following is an informal introduction some common ord schemes
used in Niagara.
</p>

<!------------------------------------------------------------->
<h2>ip:</h2>
<!------------------------------------------------------------->

<p>
The "ip" scheme is used to identify a <code>BIpHost</code> instance.
Ords starting with "ip" are always absolute and ignore any base
which may be specified.  The body of a "ip" query is a DNS hostname
or an IP address of the format "dd.dd.dd.dd".
</p>

<!------------------------------------------------------------->
<h2>fox:</h2>
<!------------------------------------------------------------->

<p>
The "fox" scheme is used to establish a Fox session.  Fox is the
primary protocol used by Niagara for IP communication.  A "fox"
query is formatted as "fox:" or "fox:&lt;port&gt;".  If port is
unspecified then the default 1911 port is assumed.
</p>

<!------------------------------------------------------------->
<h2>file:</h2>
<!------------------------------------------------------------->

<p>
The "file" scheme is used to identify files on the file system. All 
file ords resolve to instances of
<code><a href='module://docDeveloper/doc/baja-rt/javax/baja/file/BIFile.bajadoc'>javax.baja.file.BIFile</a></code>.
File queries always parse into a <code>FilePath</code>
File ords come in the following flavors:
</p>

<ul>

<li>Authority Absolute: "//hostname/dir1/dir2"</li>
<li>Local Absolute: "/dir1/dir2"</li>
<li>Sys Absolute: "!lib/system.properties"</li>
<li>User Absolute: "^config.bog"</li>
<li>Relative: "myfile.txt"</li>
<li>Relative with Backup: "../myfile.txt"</li>

</ul>

<p>Sys absolute paths indicate files rooted under the Niagara 
installation directory identified via <code>Sys.getBajaHome()</code>.
User absolute paths are rooted under the user home directory
identified via <code>Sys.getUserHome()</code>.  In the case of
station VMs, user home is the directory of the station database.
</p>

<!------------------------------------------------------------->
<h2>module:</h2>
<!------------------------------------------------------------->

<p>
The "module" scheme is used to access <code>BIFiles</code> inside 
the module jar files.  The module scheme uses the "file:" scheme's
formating where the authority name is the module name.  Module
queries can be relative also.  If the query is local absolute then
it is assumed to be relative to the current module.  Module queries 
always parse into a <code>FilePath</code>
</p>

<pre>
module://icons/x16/file.png
module://baja/javax/baja/sys/BObject.bajadoc
module:/doc/index.html
</pre>

<!------------------------------------------------------------->
<h2>station:</h2>
<!------------------------------------------------------------->

<p>
The "station" scheme is used to resolve the <code>BComponentSpace</code>
of a <a href='station.html'>station</a> database.
</p>

<!------------------------------------------------------------->
<h2>slot:</h2>
<!------------------------------------------------------------->

<p>
The "slot" scheme is used to resolve a <code>BValue</code> within
a <code>BComplex</code> by walking down a path of slot names.  Slot
queries always parse into a <code>SlotPath</code>.
</p>

<!------------------------------------------------------------->
<h2>h:</h2>
<!------------------------------------------------------------->

<p>
The "h" scheme is used to resolve a <code>BComponent</code> by 
its handle. Handles are unique String identifiers for <code>BComponents</code>
within a <code>BComponentSpace</code>.  Handles provide a way to
persistently identify a component independent of any renames which
modify a component's slot path.
</p>

<!------------------------------------------------------------->
<h2>service:</h2>
<!------------------------------------------------------------->

<p>
The "service" scheme is used to resolve a <code>BComponent</code> by 
its service type.  The body of the query should be a type spec.
</p>

<!------------------------------------------------------------->
<h2>spy:</h2>
<!------------------------------------------------------------->

<p>
The "spy" scheme is used to navigate spy pages.  The
<code><a href='module://docDeveloper/doc/baja-rt/javax/baja/spy/package-index.bajadoc'>javax.baja.spy</a></code>
APIs provide a framework for making diagnostics information easily
available.
</p>

<!------------------------------------------------------------->
<h2>bql:</h2>
<!------------------------------------------------------------->

<p>
The "bql" scheme is used to encapsulate a <a href='bql.html'>BQL</a> query.
</p>

<script type="text/javascript">
    window.niagara.docDevUtil.highlightCode();
</script>

<!-- Auto-generated Footer NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/collections.html" class="navbar">Prev</a> |  <a href="/doc/links.html" class="navbar">Next</a></p>
<!-- Auto-generated copyright note --><p class='copyright'></p>
</body>
</html>
