<!-- Htmldoc has been run -->
<!--
   @author    Dan Giorgis
   @creation  3 Oct 01
   @version   $Revision$ $Date$
   @since     Niagara 3.0
 -->
 
<html>

<head>
<title>Control</title>
<!-- Auto-generated style sheet link --><link rel='StyleSheet' href='module://bajaui/doc/style.css' type='text/css' />
<!-- Auto-generated js link for Activity Monitoring --><script type='text/javascript' src='module://web/rc/util/activityMonitor.js'></script>
<script type='text/javascript'>window.addEventListener('load', activityMonitor.start);</script>
</head>

<body>
<!-- Auto-generated Header NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/niagaraRpc.html" class="navbar">Prev</a> |  <a href="/doc/history.html" class="navbar">Next</a></p>


<!-- Title Block -->
<h1 class='title'>Control</h1> 

<!------------------------------------------------------------->
<h1>Overview</h1>
<!------------------------------------------------------------->

<p>
The control module provides normalized components for representing
control points.  All control points subclass from the 
<a href="module://docDeveloper/doc/control-rt/javax/baja/control/BControlPoint.bajadoc">BControlPoint</a>
base class.  Control points are typically used with the driver
framework to read and write points in external devices.
</p>

<p>
There are four normalized categories of data matching the four 
<code>BStatusValue</code> types.  Within each of the four categories
is a readonly component and a writable component.  These eight 
components are:
</p>               

<table border="1">
<tr><th>Type</th><th>Mode</th><th>Data</th></tr>

<tr>
<td><a href="module://docDeveloper/doc/control-rt/javax/baja/control/BBooleanPoint.bajadoc">BBooleanPoint</a></td>
<td>RO</td>
<td>Models boolean data with BStatusBoolean</td>
</tr>

<tr>
<td><a href="module://docDeveloper/doc/control-rt/javax/baja/control/BBooleanWritable.bajadoc">BBooleanWritable</a></td>
<td>RW / WO</td>
<td>Models boolean data with BStatusBoolean</td>
</tr>

<tr>
<td><a href="module://docDeveloper/doc/control-rt/javax/baja/control/BNumericPoint.bajadoc">BNumericPoint</a></td>
<td>RO</td>
<td>Models numeric or analog data with BStatusNumeric</td>
</tr>

<tr>
<td><a href="module://docDeveloper/doc/control-rt/javax/baja/control/BNumericWritable.bajadoc">BNumericWritable</a></td>
<td>RW / WO</td>
<td>Models numeric or analog data with BStatusNumeric</td>
</tr>

<tr>
<td><a href="module://docDeveloper/doc/control-rt/javax/baja/control/BEnumPoint.bajadoc">BEnumPoint</a></td>
<td>RO</td>
<td>Models discrete values within a fixed range with BStatusEnum</td>
</tr>

<tr>
<td><a href="module://docDeveloper/doc/control-rt/javax/baja/control/BEnumWritable.bajadoc">BEnumWritable</a></td>
<td>RW / WO</td>
<td>Models discrete values within a fixed range with BStatusEnum</td>
</tr>

<tr>
<td><a href="module://docDeveloper/doc/control-rt/javax/baja/control/BStringPoint.bajadoc">BStringPoint</a></td>
<td>RO</td>
<td>Models unicode strings with BStatusString</td>
</tr>

<tr>
<td><a href="module://docDeveloper/doc/control-rt/javax/baja/control/BStringWritable.bajadoc">BStringWritable</a></td>
<td>RW / WO</td>
<td>Models unicode strings with BStatusString</td>
</tr>

</table>

<!------------------------------------------------------------->
<h1 id="objectModel">Design Patterns</h1>
<!------------------------------------------------------------->

<p>               
All control points use <code>BStatusValues</code> to represent
their inputs and output.  All points have one output called "out".
The readonly points contain no inputs.  Typically they model a
value being read from a device via the driver framework.
</p>                                                              

<p>
The writable points all contain 16 inputs and a fallback value.
These 16 inputs are prioritized with 1 being the highest and
16 being the lowest.  The value to write is calculated by finding
the highest valid input (1, 2, 3, down to 16).  An input is considered 
valid if none of the following status bits are set: disabled, fault, 
down, stale, or null.  If all 16 levels are invalid, then the fallback
value is used.  Note that the fallback value itself can have the
null bit set in which case the point outputs null.  The active level is
indicated in the output as a status facet.
</p>

<p>
Each of the writable points reserves level 1 and level 8 for
user invoked overrides.  Level 1 is an emergency override which 
when invoked remains in effect permanently until the emergencyAuto 
action is invoked.  Level 8 overrides are for normal manual
overrides.  Manual overrides may be timed to expire after a period
of time, or may be explicitly canceled via the auto action.  Whenever
level 1 or 8 is the active level then the overridden status bit
is set in the output.  If a timed override is in effect then the
overrideExpiration property indicates when the override will expire.
</p>

<!------------------------------------------------------------->
<h1 id="extensions">Extensions</h1>
<!------------------------------------------------------------->

<p>
Extensions provide building blocks to extend and change the behavior 
of control points.  Every extension must derive from 
<a href="module://docDeveloper/doc/control-rt/javax/baja/control/BPointExtension.bajadoc">BPointExtension</a>.  
They are added as dynamic properties on a control point.
Extensions can process and modify the value of a control point 
whenever it executes.  For example, an alarm extension can
monitor the value and set the alarm bit of the output's status if an 
alarm condition was detected.  A list of extensions include:</p>
<ul>
<li><a href="module://docDeveloper/doc/control-rt/javax/baja/control/ext/BDiscreteTotalizerExt.bajadoc">BDiscreteTotalizerExt</a></li>
<li><a href="module://docDeveloper/doc/control-rt/javax/baja/control/ext/BNumericTotalizerExt.bajadoc">BNumericTotalizerExt</a></li>
<li><a href="module://docDeveloper/doc/driver-rt/javax/baja/driver/point/BProxyExt.bajadoc">BProxyExt</a></li>
<li><a href="module://docDeveloper/doc/alarm-rt/javax/baja/alarm/ext/BAlarmSourceExt.bajadoc">BAlarmSourceExt</a></li>
<li><a href="module://docDeveloper/doc/history-rt/javax/baja/history/ext/BIntervalHistoryExt.bajadoc">BIntervalHistoryExt</a></li>
<li><a href="module://docDeveloper/doc/history-rt/javax/baja/history/ext/BCovHistoryExt.bajadoc">BCovHistoryExt</a></li>
</ul>

<p>
Extensions are always invoked in the order they are declared
in the slot list.  They may be reordered using the standard 
reorder API and workbench commands.  
</p>

<p>
When the execute method is invoked on a 
<a href='module://docDeveloper/doc/control-rt/javax/baja/control/BControlPoint.bajadoc'>BControlPoint</a>, 
the <code>pointChanged(ControlPoint pt)</code> method is in turn invoked 
on each extension.
</p>            

<p>Note that when using extensions with driver proxy points, only the 
value being read is processed by extensions.
</p>



<!-- Auto-generated Footer NavBar --><p class="navbar">  <a href="/doc/index.html" class="navbar">Index</a> |  <a href="/doc/niagaraRpc.html" class="navbar">Prev</a> |  <a href="/doc/history.html" class="navbar">Next</a></p>
<!-- Auto-generated copyright note --><p class='copyright'></p>
</body>
</html>
